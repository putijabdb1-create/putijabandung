<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Login Teknisi ‚Äì PT PUTRA TIMUR JAYA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
<style>
body{font-family:Poppins,sans-serif;background:#020617;color:#e5e7eb;margin:0}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#020617;border:1px solid #1f2937;border-radius:14px;padding:18px;margin-bottom:16px}
h2{margin:0 0 6px;font-size:16px}
small{color:#9ca3af}
label{font-size:12px;margin-top:10px;display:block}
input,select,textarea{
width:100%;padding:8px;border-radius:8px;
background:#020617;border:1px solid #374151;color:#fff;font-size:12px
}
textarea{min-height:60px}
.btn{padding:8px 14px;border-radius:999px;border:none;font-size:12px;font-weight:600;cursor:pointer}
.btn-primary{background:#2563eb;color:#fff}
.btn-secondary{background:#111827;color:#fff;border:1px solid #374151}
.btn-danger{background:#dc2626;color:#fff}
.btn-group{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
@media(max-width:700px){.row{grid-template-columns:1fr}}
.status{font-size:11px;margin-top:6px}
</style>
</head>

<body>
<div class="container">

<!-- LOGIN -->
<div class="card">
<h2>Login Teknisi</h2>
<small>Gunakan user absensi</small>

<label>User ID</label>
<input id="loginUser">

<label>Password</label>
<input id="loginPass" type="password">

<div class="btn-group">
<button class="btn btn-primary" onclick="login()">Login</button>
</div>

<div id="loginStatus" class="status"></div>
</div>

<!-- FORM -->
<div class="card" id="formBox" style="display:none">
<h2>Form Biodata</h2>

<label>Nama Pegawai</label>
<input id="namaPegawai">

<div class="row">
<div>
<label>TTL</label>
<input id="ttl">
</div>
<div>
<label>Jenis Kelamin</label>
<select id="jenisKelamin">
<option value="">-- Pilih --</option>
<option>Laki-laki</option>
<option>Perempuan</option>
</select>
</div>
</div>

<label>Pendidikan Terakhir</label>
<input id="pendidikanAkhir">

<label>Pendidikan Formal</label>
<textarea id="pendFormal"></textarea>

<label>Pendidikan Non Formal</label>
<textarea id="pendNonFormal"></textarea>

<div class="row">
<div>
<label>Status Perkawinan</label>
<select id="statusPerkawinan">
<option></option>
<option>Belum Menikah</option>
<option>Menikah</option>
<option>Cerai</option>
</select>
</div>
<div>
<label>Lokasi Kerja</label>
<input id="lokasiKerja">
</div>
</div>

<div class="row">
<div>
<label>Posisi</label>
<input id="posisiKerja">
</div>
<div>
<label>Divisi</label>
<input id="divisi">
</div>
</div>

<label>Alamat Domisili</label>
<input id="alamatDomisili">

<div class="row">
<div><label>Kelurahan</label><input id="domKel"></div>
<div><label>Kecamatan</label><input id="domKec"></div>
</div>

<label>Kota</label>
<input id="domKota">

<div class="row">
<div><label>No HP</label><input id="noHp"></div>
<div><label>Email</label><input id="email"></div>
</div>

<div class="row">
<div><label>No KTP</label><input id="noKtp"></div>
<div><label>No NPWP</label><input id="noNpwp"></div>
</div>

<label>Nama Ibu Kandung</label>
<input id="namaIbu">

<div class="row">
<div><label>No Rekening</label><input id="noRekening"></div>
<div><label>Nama Bank</label><input id="namaBank"></div>
</div>

<div class="btn-group">
<button class="btn btn-primary" onclick="save()">üíæ Simpan</button>
<button class="btn btn-danger" onclick="logout()">Logout</button>
</div>

<div id="formStatus" class="status"></div>
</div>

</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzfYMYq83BYCNxITAK-CbGQ0uA5diRWuFw1-kyd7zzqmcFR_3hwWnHtNNDLTF4mUHc/exec";

const USERS = [
 {u:"PTJ_Arip007",p:"alvaro007",nik:"15889311",nama:"ARIP RAHMATULLOH",divisi:"PIC",area:"CMI"}
];

let currentUser=null;

function login(){
const u=document.getElementById("loginUser").value.trim();
const p=document.getElementById("loginPass").value.trim();
const s=document.getElementById("loginStatus");

const user=USERS.find(x=>x.u===u && x.p===p);
if(!user){
s.textContent="Login gagal";
s.style.color="#fca5a5";
return;
}

currentUser=user;
document.getElementById("formBox").style.display="block";
document.getElementById("namaPegawai").value=user.nama;
document.getElementById("divisi").value=user.divisi;
document.getElementById("lokasiKerja").value=user.area;
s.textContent="Login berhasil";
s.style.color="#bbf7d0";
}

function logout(){
currentUser=null;
document.getElementById("formBox").style.display="none";
}

function get(id){return document.getElementById(id).value||""}

async function save(){
if(!currentUser){alert("Login dulu");return}

const data={
mode:"saveBiodata",
user:{
username:currentUser.u,
nik:currentUser.nik,
nama:currentUser.nama
},
biodata:{
namaPegawai:get("namaPegawai"),
ttl:get("ttl"),
jenisKelamin:get("jenisKelamin"),
pendidikanAkhir:get("pendidikanAkhir"),
pendFormal:get("pendFormal"),
pendNonFormal:get("pendNonFormal"),
statusPerkawinan:get("statusPerkawinan"),
lokasiKerja:get("lokasiKerja"),
posisiKerja:get("posisiKerja"),
divisi:get("divisi"),
alamatDomisili:get("alamatDomisili"),
domKel:get("domKel"),
domKec:get("domKec"),
domKota:get("domKota"),
noHp:get("noHp"),
email:get("email"),
noKtp:get("noKtp"),
noNpwp:get("noNpwp"),
namaIbu:get("namaIbu"),
noRekening:get("noRekening"),
namaBank:get("namaBank")
}
};

document.getElementById("formStatus").textContent="Menyimpan...";

try{
const r=await fetch(WEB_APP_URL,{
method:"POST",
headers:{ "Content-Type":"text/plain;charset=utf-8" },
body:JSON.stringify(data)
});
const t=await r.text();
document.getElementById("formStatus").textContent="‚úÖ BERHASIL DISIMPAN";
document.getElementById("formStatus").style.color="#bbf7d0";
}catch(e){
document.getElementById("formStatus").textContent="‚ùå GAGAL SAVE";
document.getElementById("formStatus").style.color="#fca5a5";
}
}
</script>
</body>
</html>
