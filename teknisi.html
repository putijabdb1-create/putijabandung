<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Login Teknisi â€“ PT PUTRA TIMUR JAYA</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
body{font-family:Poppins,sans-serif;background:#020617;color:#f9fafb;margin:0}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#020617;border:1px solid #1f2937;border-radius:16px;padding:16px;margin-bottom:20px}
input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #374151;background:#020617;color:#fff;margin-bottom:8px}
button{padding:8px 14px;border-radius:999px;border:none;font-weight:600;cursor:pointer}
.btn-primary{background:#2563eb;color:#fff}
.btn-secondary{background:#111827;color:#fff;border:1px solid #374151}
.btn-danger{background:#dc2626;color:#fff}
.preview-small{max-width:120px;margin-top:6px;border-radius:8px;display:none}
h2{margin:0 0 6px}
.section{margin-top:14px;font-weight:600;border-bottom:1px solid #374151}
.biodata{background:#fff;color:#000;padding:20px}
table{width:100%;border-collapse:collapse;font-size:12px}
td{border:1px solid #000;padding:4px;vertical-align:top}
img.bio{max-width:120px;border:1px solid #000}
</style>
</head>

<body>
<div class="container">

<!-- LOGIN -->
<div class="card">
<h2>Login Teknisi</h2>
<input id="loginUser" placeholder="User ID">
<input id="loginPass" type="password" placeholder="Password">
<button class="btn-primary" onclick="login()">Login</button>
<p id="loginStatus"></p>
</div>

<!-- FORM -->
<div class="card" id="formBox" style="display:none">
<h2>Form Biodata Teknisi</h2>

<input id="namaPegawai" placeholder="Nama Pegawai">
<input id="ttl" placeholder="TTL">
<select id="jenisKelamin">
<option value="">Pilih</option>
<option>Laki-laki</option>
<option>Perempuan</option>
</select>

<div class="section">Foto</div>
<label>Foto Teknisi</label>
<input type="file" id="fotoTeknisi">
<img id="pFotoTeknisi" class="preview-small">

<label>KTP</label>
<input type="file" id="fotoKtp">
<img id="pFotoKtp" class="preview-small">

<label>NPWP</label>
<input type="file" id="fotoNpwp">
<img id="pFotoNpwp" class="preview-small">

<label>BPJS Ketenagakerjaan</label>
<input type="file" id="fotoBpjsKet">
<img id="pFotoBpjsKet" class="preview-small">

<label>BPJS Kesehatan</label>
<input type="file" id="fotoBpjsKes">
<img id="pFotoBpjsKes" class="preview-small">

<label>KK</label>
<input type="file" id="fotoKk">
<img id="pFotoKk" class="preview-small">

<br>
<button class="btn-primary" onclick="save()">Simpan</button>
<button class="btn-secondary" onclick="preview()">Preview</button>
<button class="btn-danger" onclick="logout()">Logout</button>
<p id="formStatus"></p>
</div>

<!-- PREVIEW -->
<div id="previewBox" class="biodata" style="display:none">
<h2 style="text-align:center">BIODATA PEGAWAI<br>PT PUTRA TIMUR JAYA</h2>

<table>
<tr><td>Nama</td><td id="pvNama"></td></tr>
<tr><td>TTL</td><td id="pvTtl"></td></tr>
<tr><td>Jenis Kelamin</td><td id="pvJk"></td></tr>
<tr><td>Foto</td><td><img id="bioFotoTeknisi" class="bio"></td></tr>
</table>

<h3>Foto Dokumen</h3>
<table>
<tr><td>KTP</td><td><img id="bioFotoKtp" class="bio"></td></tr>
<tr><td>NPWP</td><td><img id="bioFotoNpwp" class="bio"></td></tr>
<tr><td>BPJS Ketenagakerjaan</td><td><img id="bioFotoBpjsKet" class="bio"></td></tr>
<tr><td>BPJS Kesehatan</td><td><img id="bioFotoBpjsKes" class="bio"></td></tr>
<tr><td>KK</td><td><img id="bioFotoKk" class="bio"></td></tr>
</table>
</div>

</div>

<script>
/* ===== CONFIG ===== */
const WEB_APP_URL = "PASTE_WEB_APP_URL_KAMU";

/* ===== USERS ===== */
const USERS = [
 {u:"PTJ_Arip007",p:"alvaro007",nama:"ARIP RAHMATULLOH"}
];

let current=null;
let foto={};

/* ===== LOGIN ===== */
function login(){
 const u=loginUser.value,p=loginPass.value;
 const user=USERS.find(x=>x.u===u&&x.p===p);
 if(!user){loginStatus.textContent="Login gagal";return;}
 current=user;
 namaPegawai.value=user.nama;
 formBox.style.display="block";
 loginStatus.textContent="Login berhasil";
}

/* ===== LOGOUT ===== */
function logout(){
 current=null;
 formBox.style.display="none";
 previewBox.style.display="none";
}

/* ===== FILE ===== */
function read(id,key,preview){
 document.getElementById(id).onchange=e=>{
  const r=new FileReader();
  r.onload=x=>{
   foto[key]=x.target.result;
   preview.src=x.target.result;
   preview.style.display="block";
  };
  r.readAsDataURL(e.target.files[0]);
 };
}
read("fotoTeknisi","fotoTeknisi",pFotoTeknisi);
read("fotoKtp","fotoKtp",pFotoKtp);
read("fotoNpwp","fotoNpwp",pFotoNpwp);
read("fotoBpjsKet","fotoBpjsKet",pFotoBpjsKet);
read("fotoBpjsKes","fotoBpjsKes",pFotoBpjsKes);
read("fotoKk","fotoKk",pFotoKk);

/* ===== SAVE ===== */
async function save(){
 formStatus.textContent="Menyimpan...";
 await fetch(WEB_APP_URL,{
  method:"POST",
  headers:{"Content-Type":"text/plain;charset=utf-8"},
  body:JSON.stringify({
   mode:"saveBiodata",
   user:{username:current.u,nama:current.nama},
   biodata:{
    namaPegawai:namaPegawai.value,
    ttl:ttl.value,
    jenisKelamin:jenisKelamin.value
   },
   ...foto
  })
 });
 formStatus.textContent="Tersimpan";
}

/* ===== PREVIEW ===== */
async function preview(){
 const r=await fetch(WEB_APP_URL,{
  method:"POST",
  headers:{"Content-Type":"text/plain;charset=utf-8"},
  body:JSON.stringify({mode:"getBiodata",username:current.u})
 });
 const j=await r.json();
 if(!j.found)return;

 pvNama.textContent=j.biodata.namaPegawai;
 pvTtl.textContent=j.biodata.ttl;
 pvJk.textContent=j.biodata.jenisKelamin;

 const s=(id,u)=>{if(u){id.src=u;id.style.display="block"}};
 s(bioFotoTeknisi,j.photos.fotoTeknisi);
 s(bioFotoKtp,j.photos.fotoKtp);
 s(bioFotoNpwp,j.photos.fotoNpwp);
 s(bioFotoBpjsKet,j.photos.fotoBpjsKet);
 s(bioFotoBpjsKes,j.photos.fotoBpjsKes);
 s(bioFotoKk,j.photos.fotoKk);

 previewBox.style.display="block";
}
</script>
</body>
</html>
