<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Login Teknisi â€“ PT PUTRA TIMUR JAYA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Poppins,system-ui;
  background:
    radial-gradient(circle at top left,#22c55e22,transparent 50%),
    radial-gradient(circle at bottom right,#2563eb22,transparent 55%),
    linear-gradient(135deg,#020617,#020617);
  color:#f9fafb;
}
.container{max-width:1100px;margin:auto;padding:20px}
.card{
  background:#020617;
  border:1px solid #1f2937;
  border-radius:16px;
  padding:18px;
  margin-bottom:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.6)
}
h1,h2{margin:0 0 10px}
label{font-size:12px;color:#9ca3af}
input,select,textarea{
  width:100%;
  background:#020617;
  border:1px solid #374151;
  border-radius:10px;
  padding:8px 10px;
  color:#fff;
  margin-bottom:8px;
  font-size:12px
}
input[readonly]{opacity:.6}
textarea{min-height:60px}
.row{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.btn{
  border:none;
  border-radius:999px;
  padding:8px 14px;
  font-size:12px;
  cursor:pointer;
  font-weight:600
}
.btn-primary{background:#2563eb;color:#fff}
.btn-danger{background:#dc2626;color:#fff}
.btn-secondary{background:#020617;border:1px solid #374151;color:#fff}
.preview-img{max-width:120px;margin-top:6px;border-radius:8px;border:1px solid #1f2937}
.section{margin-top:14px;border-top:1px solid #1f2937;padding-top:10px}
.hidden{display:none}

/* A4 Preview */
#printArea{
  background:#fff;
  color:#000;
  padding:18mm 20mm;
  width:210mm;
  min-height:297mm;
  margin:20px auto;
  box-shadow:0 10px 30px rgba(0,0,0,.3);
  font-size:11px
}
#printArea table{width:100%;border-collapse:collapse}
#printArea td{border:1px solid #00000033;padding:4px}
</style>
</head>

<body>
<div class="container">

<h1>Login Teknisi</h1>

<div class="card">
  <label>User ID</label>
  <input id="loginUser">
  <label>Password</label>
  <input id="loginPass" type="password">
  <button class="btn btn-primary" onclick="login()">Login</button>
  <div id="loginStatus"></div>
</div>

<div class="card hidden" id="formCard">

<h2>Form Biodata Teknisi</h2>

<div class="section">
<h3>Data Utama</h3>
<label>User ID</label><input id="userId" readonly>
<label>Nama Pegawai</label><input id="namaPegawai" readonly>
<div class="row">
  <div><label>Lokasi Kerja</label><input id="lokasiKerja" readonly></div>
  <div><label>Divisi</label><input id="divisi" readonly></div>
</div>
<label>Posisi Kerja</label><input id="posisiKerja" readonly>
</div>

<div class="section">
<h3>Data Pribadi</h3>
<div class="row">
  <div>
    <label>Jenis Kelamin</label>
    <select id="jenisKelamin">
      <option value="">-- Pilih --</option>
      <option>Laki-laki</option>
      <option>Perempuan</option>
    </select>
  </div>
  <div>
    <label>Status Perkawinan</label>
    <select id="statusPerkawinan">
      <option>Belum Kawin</option>
      <option>Kawin</option>
      <option>Cerai</option>
    </select>
  </div>
</div>
<label>Tempat / Tanggal Lahir</label><input id="ttl">
<label>Pendidikan Terakhir</label><input id="pendidikanAkhir">
<label>Pendidikan Formal</label><textarea id="pendFormal"></textarea>
<label>Pendidikan Non Formal</label><textarea id="pendNonFormal"></textarea>
</div>

<div class="section">
<h3>Kontak</h3>
<div class="row">
  <div><label>No HP</label><input id="noHp"></div>
  <div><label>Email</label><input id="email"></div>
</div>
</div>

<div class="section">
<h3>Upload Foto (WAJIB)</h3>

<label>Foto Teknisi</label>
<input type="file" id="fotoTeknisi">
<img id="pvFotoTeknisi" class="preview-img">

<label>Foto KTP</label>
<input type="file" id="fotoKtp">
<img id="pvFotoKtp" class="preview-img">

<label>Foto NPWP</label>
<input type="file" id="fotoNpwp">
<img id="pvFotoNpwp" class="preview-img">

<label>Foto SIM C</label>
<input type="file" id="fotoSim">
<img id="pvFotoSim" class="preview-img">

<label>Foto BPJS Kesehatan</label>
<input type="file" id="fotoBpjsKes">
<img id="pvFotoBpjsKes" class="preview-img">

<label>Foto BPJS Ketenagakerjaan</label>
<input type="file" id="fotoBpjsKet">
<img id="pvFotoBpjsKet" class="preview-img">

<label>Foto KK</label>
<input type="file" id="fotoKk">
<img id="pvFotoKk" class="preview-img">
</div>

<button class="btn btn-primary" onclick="save()">ðŸ’¾ Simpan</button>
<button class="btn btn-secondary" onclick="preview()">ðŸ‘€ Preview</button>
<button class="btn btn-danger" onclick="logout()">Logout</button>

<div id="formStatus"></div>
</div>

<div id="previewWrap" class="hidden">
  <div id="printArea">
    <h2 style="text-align:center">BIODATA PEGAWAI<br>PT PUTRA TIMUR JAYA</h2>
    <table>
      <tr><td>Nama</td><td id="pvNama"></td></tr>
      <tr><td>TTL</td><td id="pvTtl"></td></tr>
      <tr><td>Jenis Kelamin</td><td id="pvJk"></td></tr>
      <tr><td>Status</td><td id="pvStatus"></td></tr>
    </table>
    <h3>Foto</h3>
    <img id="printFoto" style="max-width:150px">
  </div>
</div>

</div>

<script>
const WEB_APP_URL = "PASTE_WEB_APP_URL_KAMU_DI_SINI";

const USERS = [
  {username:"PTJ_Arip007",password:"alvaro007",nama:"ARIP RAHMATULLOH",divisi:"PIC",lokasi:"CMI",posisi:"BASIC_TEKNISI"}
];

let currentUser=null;
let fotoData={};

function login(){
  const u=document.getElementById("loginUser").value;
  const p=document.getElementById("loginPass").value;
  const user=USERS.find(x=>x.username===u&&x.password===p);
  if(!user){alert("Login gagal");return}
  currentUser=user;
  document.getElementById("formCard").classList.remove("hidden");
  document.getElementById("userId").value=user.username;
  document.getElementById("namaPegawai").value=user.nama;
  document.getElementById("divisi").value=user.divisi;
  document.getElementById("lokasiKerja").value=user.lokasi;
  document.getElementById("posisiKerja").value=user.posisi;
}

function bindFile(id,img,key){
  document.getElementById(id).onchange=e=>{
    const r=new FileReader();
    r.onload=()=>{fotoData[key]=r.result;img.src=r.result};
    r.readAsDataURL(e.target.files[0]);
  }
}
bindFile("fotoTeknisi",pvFotoTeknisi,"foto");
bindFile("fotoKtp",pvFotoKtp,"fotoKtp");
bindFile("fotoNpwp",pvFotoNpwp,"fotoNpwp");
bindFile("fotoSim",pvFotoSim,"fotoSim");
bindFile("fotoBpjsKes",pvFotoBpjsKes,"fotoBpjsKes");
bindFile("fotoBpjsKet",pvFotoBpjsKet,"fotoBpjsKet");
bindFile("fotoKk",pvFotoKk,"fotoKk");

async function save(){
  const data={
    mode:"saveBiodata",
    user:currentUser,
    biodata:{
      ttl:ttl.value,
      jenisKelamin:jenisKelamin.value,
      statusPerkawinan:statusPerkawinan.value,
      pendidikanAkhir:pendidikanAkhir.value,
      pendFormal:pendFormal.value,
      pendNonFormal:pendNonFormal.value,
      noHp:noHp.value,
      email:email.value
    },
    ...fotoData
  };
  await fetch(WEB_APP_URL,{
    method:"POST",
    headers:{"Content-Type":"text/plain;charset=utf-8"},
    body:JSON.stringify(data)
  });
  alert("Tersimpan");
}

function preview(){
  pvNama.textContent=namaPegawai.value;
  pvTtl.textContent=ttl.value;
  pvJk.textContent=jenisKelamin.value;
  pvStatus.textContent=statusPerkawinan.value;
  printFoto.src=fotoData.foto||"";
  previewWrap.classList.remove("hidden");
}

function logout(){location.reload()}
</script>
</body>
</html>
